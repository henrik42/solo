<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>solo.web.spa documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Solo</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Einführung in Solo</span></div></a></li><li class="depth-1 "><a href="README.html"><div class="inner"><span>From Zero To Hero</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>solo</span></div></div></li><li class="depth-2 branch"><a href="solo.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="solo.jetty.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jetty</span></div></a></li><li class="depth-2"><a href="solo.jumpstart.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jumpstart</span></div></a></li><li class="depth-3"><a href="solo.jumpstart.servlet_container_initializer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet_container_initializer</span></div></a></li><li class="depth-2 branch"><a href="solo.main.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>main</span></div></a></li><li class="depth-2 branch"><a href="solo.nrepl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nrepl</span></div></a></li><li class="depth-2 branch"><a href="solo.swank.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>swank</span></div></a></li><li class="depth-2"><a href="solo.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li><li class="depth-3 current"><a href="solo.web.spa.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spa</span></div></a></li><li class="depth-2"><a href="solo.webapp.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>webapp</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="solo.web.spa.html#var-app"><div class="inner"><span>app</span></div></a></li><li class="depth-1"><a href="solo.web.spa.html#var-get-current-loggers"><div class="inner"><span>get-current-loggers</span></div></a></li><li class="depth-1"><a href="solo.web.spa.html#var-main-routes"><div class="inner"><span>main-routes</span></div></a></li><li class="depth-1"><a href="solo.web.spa.html#var-set-log-level.21"><div class="inner"><span>set-log-level!</span></div></a></li><li class="depth-1"><a href="solo.web.spa.html#var-the-page"><div class="inner"><span>the-page</span></div></a></li><li class="depth-1"><a href="solo.web.spa.html#var-ws-routes"><div class="inner"><span>ws-routes</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">solo.web.spa</h1><div class="doc"><div class="markdown"><p>The server-side of the single page application (SPA).</p>
<p>Just like <code>solo.web</code> this namespace delivers a Compojure/Hiccup-based Ring-handler. In <strong>addition</strong> to <code>solo.web</code> it offers routes for</p>
<ul>
  <li>
  <p>loading the SPA, including loading JavaScript sources</p></li>
  <li>
  <p>getting the current loggers in JSON format</p></li>
  <li>
  <p>setting a logger’s log-level</p></li>
</ul>
<p>So this namespaces delivers the content/assets for the SPA.</p></div></div><div class="public anchor" id="var-app"><h3>app</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Top-level Ring-handler (*THE APP*).</p></div></div></div><div class="public anchor" id="var-get-current-loggers"><h3>get-current-loggers</h3><div class="usage"><code>(get-current-loggers)</code></div><div class="doc"><div class="markdown"><p>Returns the current loggers in a nested map (Ring-handler map). See <code>solo.web/get-current-loggers</code>.</p>
<p>Example:</p>
<pre><code>(get-current-loggers)
;;--&gt; {:body {:loggers ({:logger-name "de.innovas", :log-level "INFO"}
                        {:logger-name "root", :log-level "DEBUG"})},
       :headers {"Cache-Control" "no-cache"}}
</code></pre></div></div></div><div class="public anchor" id="var-main-routes"><h3>main-routes</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>The Ring-handler for all the routes that <em>Solo</em> supports:</p>
<ul>
  <li><code>GET /spa</code>: delivers <em>the one and only page</em> (<code>solo.web.spa/the-page</code>)</li>
  <li><code>GET /out</code>: delivers compiled CLJS (i.e. JavaScript and source maps) sources (static <em>resources</em>)</li>
  <li><code>GET /ws/get-current-loggers</code> (see <code>ws-routes</code>)</li>
  <li><code>POST /ws/set-log-level/:logger/:level</code> (see <code>ws-routes</code>)</li>
</ul>
<p>In <strong>addition</strong> all routes of <code>solo.web/main-routes</code> are served. So you can switch back and forth (or use multi-tab browsing) between the SPA and the old-fashion web-app. They both talk to the same backend/log4j.</p></div></div></div><div class="public anchor" id="var-set-log-level.21"><h3>set-log-level!</h3><div class="usage"><code>(set-log-level! logger level)</code></div><div class="doc"><div class="markdown"><p>Sets the log-level. See <code>solo.web/set-log-level!</code>. Returns {:body {}}`.</p>
<p>Note: this function <strong>returns</strong> an empty Ring-response <code>:body</code> which becomes an empty JSON message (i.e. <code>{}</code>) on the client. The browser <strong>needs</strong> this. That’s why we do not just call <code>solo.web/set-log-level!</code>.</p></div></div></div><div class="public anchor" id="var-the-page"><h3>the-page</h3><div class="usage"><code>(the-page)</code></div><div class="doc"><div class="markdown"><p>Returns the HTML markup for the SPA.</p>
<p>The markup contains a <code>script</code> element that makes the browser load the JavaScript sources for the SPA. On completion the SPA will be started and the GUI will be built and populated with the currently active/registered log4 loggers.</p></div></div></div><div class="public anchor" id="var-ws-routes"><h3>ws-routes</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Web-Service routes.</p>
<p>These will be called from the browser (CLJS/JavaScript).</p>
<ul>
  <li>
    <p><code>GET /ws/get-current-loggers</code>: returns the currently  active/registered log4j loggers in JSON. Try</p>
    <p>curl <a href="http://localhost:3000/ws/get-current-loggers">http://localhost:3000/ws/get-current-loggers</a></p>
    <p>;;–&gt; {“loggers”:[{“logger-name”:“root”,“log-level”:“DEBUG”}]}</p>
  </li>
  <li>
    <p><code>POST /ws/set-log-level/:logger/:level</code>: sets the <code>:level</code> of the  <code>:logger</code>. Note that the <code>POST</code> has no <em>message</em> <em>content</em> – just  the URL. Try</p>
    <p>curl -X POST <a href="http://localhost:3000/ws/set-log-level/foo/info">http://localhost:3000/ws/set-log-level/foo/info</a></p>
  </li>
</ul></div></div></div></div></body></html>