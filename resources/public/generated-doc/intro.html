<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Einführung in Solo</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Solo</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="intro.html"><div class="inner"><span>Einführung in Solo</span></div></a></li><li class="depth-1 "><a href="README.html"><div class="inner"><span>From Zero To Hero</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>solo</span></div></div></li><li class="depth-2 branch"><a href="solo.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="solo.jetty.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jetty</span></div></a></li><li class="depth-2"><a href="solo.jumpstart.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jumpstart</span></div></a></li><li class="depth-3"><a href="solo.jumpstart.servlet_container_initializer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet_container_initializer</span></div></a></li><li class="depth-2 branch"><a href="solo.main.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>main</span></div></a></li><li class="depth-2 branch"><a href="solo.nrepl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nrepl</span></div></a></li><li class="depth-2 branch"><a href="solo.swank.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>swank</span></div></a></li><li class="depth-2"><a href="solo.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li><li class="depth-3"><a href="solo.web.spa.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spa</span></div></a></li><li class="depth-2"><a href="solo.webapp.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>webapp</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#einführung-in-solo" name="einführung-in-solo"></a>Einführung in Solo</h1>
<p><em>Solo</em> ist eine Web-Anwendung, mit der man zur Laufzeit log4j Log-Level einstellen kann.</p>
<p><em>Solo</em> benutzt selber keine log4j Logger, um Log-Ausgaben zu erzeugen. <em>Solo</em> ist dazu gedacht, “neben” eine andere Anwendung (z.B. eine Java-/JEE-Anwendung) in einen Application-Server deployt zu werden, um so die Möglichkeit zu haben, die log4j Log-Level-Einstellungen dieser “Host-Anwendung” zu steuern.</p>
<h1><a href="#verwendung" name="verwendung"></a>Verwendung</h1>
<p>Der Einstieg erfolgt über <code>http://&lt;host&gt;:&lt;port&gt;/solo-web/</code></p>
<p>Die GUI bietet:</p>
<ul>
  <li>einen Link auf die HTML Dokumentation (ist im WAR enthalten). Die  Doku umfasst den Clojure Quellcode und die API Doku.</li>
  <li>eine Eingabemöglichkeit für einen Logger-Namen und  Log-Level. Dadurch kann man zu einem Logger direkt den Log-Level  einstellen. Die Verarbeitung erfolgt über den Butten <code>SET LOG-LEVEL</code></li>
  <li>eine Tabelle, in der alle derzeit in log4j “registrierten” Logger  (inkl. Root-Logger <code>root</code>) mit ihrem jeweiligen Log-Level angezeigt  werden. Über Drop-Down-Elemente kann man den Log-Level setzen.</li>
  <li>im Tabellen-Kopf die Möglichkeit, einen regulären Ausdruck  einzugeben, der zum Filtern der Logger in der Tabelle benutzt wird.</li>
  <li>eine Checkbox, mit der man steuern kann, dass Logger, die keinen  gesetzten Log-Level (<code>NOT-SET!</code>) haben, nicht in der Tabelle  angezeigt werden.</li>
</ul>
<p>Die Verarbeitung aller Einstellungen, die in der Tabelle gemacht werden (Filter, Checkbox, Log-Level), erfolgt über den Button <code>SET LOG-LEVELS</code>.</p>
<h1><a href="#installation" name="installation"></a>Installation</h1>
<p><em>Solo</em> kann auf zwei Arten “installiert” werden.</p>
<h2><a href="#deployment-als-war" name="deployment-als-war"></a>Deployment als WAR</h2>
<p>Das <em>Solo</em> WAR wird einfach in den JBoss/Wildfly deployt, in den auch die Host-Anwendung deployt ist. Es ist auch möglich, das WAR in das JBoss/Wildfly Content-Repository zu laden und dann dem Profil bzw. den Profilen zuzuordnen (*assign*). Die Zuorndung kann auch jederzeit deaktiviert und wieder aktiviert werden. Damit ergibt sich folgender Workflow:</p>
<ul>
  <li>WAR in Content-Repo hochladen</li>
  <li>WAR den Profilen zuordnen</li>
  <li>Die Zuordnung nach Belieben aktivieren/deaktivieren</li>
</ul>
<p>In diesem Szenario ist es dann möglich, eine neue Version von Solo <strong>einmalig</strong> in das Content-Repo hochzuladen und das dort vorhandene WAR damit zu <strong>ersetzen</strong>. Dabei braucht man die Zuordnungen zu den Profilen überhaupt nicht “anzufassen”.</p>
<p>Wichtig ist, dass beim Re-Deployment der Host-Anwendung <strong>kein</strong> <strong>Undeployment</strong> von <em>Solo</em> WAR erfolgt.</p>
<p>Auch im Websphere kann man <em>Solo</em> als WAR “neben” die Host-Anwendung deployen. Man muss hier ebenfalls dafür sorgen, dass <em>Solo</em> WAR nicht undeployt wird, wenn die Host-Anwendung erneut deployt wird. Man muss im Websphere auf die Klassenlader-Einstellungen achten. Falls man “alle Web-Anwendungen mit demselben Klassenlader laden” wählt, kann es sein, dass die Klassen in <em>Solo</em> mit denen der Host-Anwendung kollidieren. In der Regel sollten die Anwendungen aber keine gemeinsame Klasse haben.</p>
<p>Das Verfahren (Deployment als WAR) klappt nur mit “Enterprise-Anwendungen”, da in diesem Fall das log4j JAR im EAR/<code>lib</code> liegt und dort sowohl von der Host-Anwendung als auch von <em>Solo</em> “gesehen” wird. Im Websphere ist es auch möglich, <em>Solo</em> mit einer reinen Web-Anwendung zu koppeln, wenn man “alle Web-Anwendungen mit demselben Klassenlader laden” verwendet.</p>
<p>Um <em>Solo</em> z.B. im Tomcat mit einer Web-Anwendung zu koppeln, muss man auf “Deployment als Module” zurückgreifen.</p>
<h2><a href="#deployment-als-modul" name="deployment-als-modul"></a>Deployment als Modul</h2>
<p>Bei diesem Deployment-Szenario werden zwei JVMs eingesetzt.</p>
<p><strong>Hinweis:</strong> diese Deployment-Option kann für alle Container und  sowohl für Web- als auch EAR/JEE-Anwendungen verwendet werden.</p>
<h3><a href="#solo-core-jvm" name="solo-core-jvm"></a>Solo Core-JVM</h3>
<p>Der “Kern” von <em>Solo</em> (<code>solo.core</code>) und der “Remote-Server” (<code>solo.nrepl</code>) (und deren Abhängigkeiten inkl. Clojure) werden als (*shaded* bzw <em>uber</em>) JAR in den Server deployt und der Host-Anwendung zugeordnet (vgl. oben). Dabei kann es sich um einen JEE-Application Server (EAR) oder Servlet-Container (z.B. Jetty, Tomcat) handeln.</p>
<p>Zusätzlich muss ein zweites JAR (<code>solo-jumpstart.jar</code>) deployt werden, das dafür sorgt, dass der Kern von <em>Solo</em> beim Start der Host-Anwendung mit hochgefahren wird.</p>
<p>Die Zuordnung zur “Host-Anwendung” kann im JBoss/Wildfly über zwei Wege erfolgen:</p>
<ul>
  <li>als zugeordnete Artefakte (vgl. oben)</li>
  <li>als sog. “global module”</li>
</ul>
<p>Im Websphere erfolgt die Zuordnung über eine “shared library” (entspricht dem “global modul” im JBoss) oder als deploytes Artefakt. Die Zuordnung über “shared library” hat den Vorteil, dass man diese global “pflegen” kann und nach Belieben den verschiedenen Servern/Anwendungen zuodnen kann. </p>
<h3><a href="#solo-web-jvm" name="solo-web-jvm"></a>Solo Web-JVM</h3>
<p>Die Web-Anwendung wird in diesem Szenario in einer separaten JVM (*Solo* Web-JVM) betrieben. Dabei kann es sich wiederum um einen Container handeln (JBoss/Wildfly, Jetty, Tomcat, etc.), in dem die Web-Schicht von <em>Solo</em> läuft (diesmal aber <strong>ohne</strong> Host-Anwendung!) oder man startet einfach den Jetty-Server, der in <em>Solo</em> enthalten ist, ohne einen Container einzusetzen.</p>
<h3><a href="#laufzeit" name="laufzeit"></a>Laufzeit</h3>
<p>Zur Laufzeit startet <em>Solo</em> Core-JVM (“Backend”) einen nREPL-Server (vgl. <code>solo-jumpstart.jar</code> oben). Über diesen kann nun die <em>Solo</em> Web-JVM mit dem “Backend” kommunizieren und selber nur für die Interaktion mit dem Endanwender sorgen.</p>
<p>Um mit dem nREPL-Serve kommunizieren zu können, muss man die Portnummer kennen, auf der der nREPL-Server lauscht. Diese muss für <em>Solo</em> Web-JVM dann als Portnummer angegeben werden.</p></div></div></div></body></html>