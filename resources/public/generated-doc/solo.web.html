<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>solo.web documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Solo</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Introduction to solo</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>solo</span></div></div></li><li class="depth-2 branch"><a href="solo.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="solo.jetty.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jetty</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jumpstart</span></div></div></li><li class="depth-3"><a href="solo.jumpstart.jsf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jsf</span></div></a></li><li class="depth-2 branch"><a href="solo.nrepl.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>nrepl</span></div></a></li><li class="depth-2 branch"><a href="solo.swank.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>swank</span></div></a></li><li class="depth-2 branch current"><a href="solo.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li><li class="depth-2"><a href="solo.webapp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>webapp</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="solo.web.html#var-app"><div class="inner"><span>app</span></div></a></li><li class="depth-1"><a href="solo.web.html#var-get-current-loggers"><div class="inner"><span>get-current-loggers</span></div></a></li><li class="depth-1"><a href="solo.web.html#var-log-levels"><div class="inner"><span>log-levels</span></div></a></li><li class="depth-1"><a href="solo.web.html#var-loggers-form"><div class="inner"><span>loggers-form</span></div></a></li><li class="depth-1"><a href="solo.web.html#var-main-routes"><div class="inner"><span>main-routes</span></div></a></li><li class="depth-1"><a href="solo.web.html#var-make-redirect-url"><div class="inner"><span>make-redirect-url</span></div></a></li><li class="depth-1"><a href="solo.web.html#var-req-.3Efilter-reg-ex"><div class="inner"><span>req-&gt;filter-reg-ex</span></div></a></li><li class="depth-1"><a href="solo.web.html#var-req-.3Ehide"><div class="inner"><span>req-&gt;hide</span></div></a></li><li class="depth-1"><a href="solo.web.html#var-set-log-level-form"><div class="inner"><span>set-log-level-form</span></div></a></li><li class="depth-1"><a href="solo.web.html#var-set-log-level.3F"><div class="inner"><span>set-log-level?</span></div></a></li><li class="depth-1"><a href="solo.web.html#var-the-page"><div class="inner"><span>the-page</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">solo.web</h1><div class="doc"><div class="markdown"><p>A Ring/Compojure/Hiccup-based web application.</p>
<p>This namespace contains the Ring-handler/Compojure-routes and functions for</p>
<ul>
  <li>accessing the <code>solo.core</code> business backend (_model_)</li>
  <li>reacting to user input (_controller_)</li>
  <li>creating the presentation (_view_)</li>
</ul></div></div><div class="public anchor" id="var-app"><h3>app</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Top-level Ring-handler.</p></div></div></div><div class="public anchor" id="var-get-current-loggers"><h3>get-current-loggers</h3><div class="usage"><code>(get-current-loggers {:keys [filter-reg-ex hide]})</code></div><div class="doc"><div class="markdown"><p>Returns a mapped, filtered and sorted map-set of current log4j logger (see <code>solo.core/get-current-loggers</code>).</p>
<p>For presentation purposes each <code>:log-level</code> will be mapped as follows:</p>
<ul>
  <li>empty <code>:log-level</code> (i.e. <code>""</code>) becomes <code>"NOT-SET!"</code></li>
  <li>any <code>:log-level</code> not contained in <code>solo.web/log-levels</code> becomes  <code>"UNKNOWN!"</code></li>
</ul>
<p>Filtering is done by <code>re-find</code>-matching <code>filter-reg-ex</code> against the <code>logger-name</code>. Sorting is done on <code>logger-name</code>. When <code>hide</code> is truthly loggers with (mapped) <code>:log-level</code> <code>"NOT-SET!"</code> will be filtered out.</p></div></div></div><div class="public anchor" id="var-log-levels"><h3>log-levels</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>The set of known log-levels (incl. <code>"UNKNOWN!"</code> and <code>"NOT-SET!"</code>).</p></div></div></div><div class="public anchor" id="var-loggers-form"><h3>loggers-form</h3><div class="usage"><code>(loggers-form loggers {:keys [filter-reg-ex hide]})</code></div><div class="doc"><div class="markdown"><p>Returns a Hiccup-vector for the <em>loggers form</em> which allows the user to select a log-level for each of the <code>loggers</code>. Within this form the user may also enter a filter-reg-ex (which will be used to <code>re-find</code>-match loggers by their <code>logger-name</code>) and check-select to hide loggers with log-level <code>NOT-SET!</code>.</p>
<p>Submission will <code>POST /update-loggers</code>.</p></div></div></div><div class="public anchor" id="var-main-routes"><h3>main-routes</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>The Ring-handler for all the routes that <em>Solo</em> supports:</p>
<ul>
  <li><code>GET /</code>: delivers <em>the page</em> (<code>solo.web/the-page</code>)</li>
  <li><code>GET /&lt;resource&gt;</code>: delivers static resources (CSS, HTML, etc.)</li>
  <li><code>POST /set-log-level</code>: sets the log-level for a logger</li>
  <li><code>POST /update-loggers</code>: sets the log-level for all displayed  loggers</li>
</ul></div></div></div><div class="public anchor" id="var-make-redirect-url"><h3>make-redirect-url</h3><div class="usage"><code>(make-redirect-url req)</code></div><div class="doc"><div class="markdown"><p>Returns an absolute URL to the context-root of the web-app (which received the given ring-request) including URL parameter expressions for <em>hide</em> and <em>filter-reg-ex</em>.</p>
<p>The URL does not include protcol and hostname. This URL is used for redirecting the browser to the context-root of the application after having submitted a <code>POST</code> request.</p></div></div></div><div class="public anchor" id="var-req-.3Efilter-reg-ex"><h3>req-&gt;filter-reg-ex</h3><div class="usage"><code>(req-&gt;filter-reg-ex {:keys [request-method params]})</code></div><div class="doc"><div class="markdown"><p>Extracts and returns the <em>filter-reg-ex</em> parameter from the ring-request-map.</p></div></div></div><div class="public anchor" id="var-req-.3Ehide"><h3>req-&gt;hide</h3><div class="usage"><code>(req-&gt;hide {:keys [request-method params]})</code></div><div class="doc"><div class="markdown"><p>Extracts and returns the <em>hide</em> parameter from the ring-request-map.</p></div></div></div><div class="public anchor" id="var-set-log-level-form"><h3>set-log-level-form</h3><div class="usage"><code>(set-log-level-form {:keys [filter-reg-ex hide]})</code></div><div class="doc"><div class="markdown"><p>Returns a Hiccup-vector for the <em>set log-level form</em> which allows the user to enter a logger-name and select a log-level.</p>
<p><code>:filter-reg-ex</code> and <code>:hide</code> are put into hidden fields so that they are submitted with the form and can be picked up with the <code>POST
/set-log-level</code> request.</p></div></div></div><div class="public anchor" id="var-set-log-level.3F"><h3>set-log-level?</h3><div class="usage"><code>(set-log-level? logger-name log-level)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the loggerâ€™s log-level should be set (and <code>false</code> otherwise).</p>
<p>There are some special cases we take care of:</p>
<ul>
  <li>loggers with <code>:logger-name</code> <code>""</code> will not be set</li>
  <li>loggers with <code>:logger-name</code> starting with <em>blank</em> (i.e. <code>" "</code>)  will not be set. This case handles non-logger  form-params (e.g. filter and hide settings).</li>
  <li>log-levels <code>"UNKNOWN!"</code> and <code>"NOT-SET!"</code> will not be set.</li>
</ul></div></div></div><div class="public anchor" id="var-the-page"><h3>the-page</h3><div class="usage"><code>(the-page options)</code></div><div class="doc"><div class="markdown"><p>Returns the HTML markup for the complete page (there is just one in <em>Solo</em>).</p>
<p>Calls <code>(solo.web/get-current-loggers options)</code> to retrieve the list of loggers to display and includes <code>(set-log-level-form options)</code> and <code>(loggers-form (solo.web/get-current-loggers options) options)</code> in its <code>&lt;body&gt;</code>.</p></div></div></div></div></body></html>